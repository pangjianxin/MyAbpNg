<form nz-form [formGroup]="form" (ngSubmit)="onSubmit()">
    <nz-form-item *ngIf="!hideCurrentPassword">
        <nz-form-label [nzSpan]="5" nzRequired>
            <i nz-icon nzType="bank"></i>
            {{'AbpIdentity::DisplayName:CurrentPassword' | abpLocalization}}
        </nz-form-label>
        <nz-form-control [nzSpan]="18" [nzErrorTip]="orgErrorTpl">
            <input type="password" formControlName="password" nz-input
                [placeholder]="'AbpIdentity::DisplayName:CurrentPassword' | abpLocalization">
            <ng-template #orgErrorTpl let-control>
                <i nz-icon nzType="warning"></i>
                请输入机构信息
            </ng-template>
        </nz-form-control>
    </nz-form-item>
    <nz-form-item>
        <nz-form-label [nzSpan]="5" nzRequired>
            <i nz-icon nzType="mobile"></i>
            {{ 'AbpIdentity::DisplayName:NewPassword' | abpLocalization }}
        </nz-form-label>
        <nz-form-control [nzSpan]="18" nzHasFeedback [nzErrorTip]="passwordErrorTpl">
            <input type="password" formControlName="newPassword" nz-input
                [placeholder]="'AbpIdentity::DisplayName:NewPassword' | abpLocalization">
        </nz-form-control>
    </nz-form-item>
    <nz-form-item>
        <nz-form-label [nzSpan]="5" nzRequired>
            <i nz-icon nzType="phone"></i>
            {{'AbpIdentity::DisplayName:NewPasswordConfirm' | abpLocalization }}
        </nz-form-label>
        <nz-form-control [nzSpan]="18" nzHasFeedback [nzErrorTip]="passwordErrorTpl">
            <input type="password" formControlName="repeatNewPassword" nz-input
                [placeholder]="'AbpIdentity::DisplayName:NewPasswordConfirm' | abpLocalization">
        </nz-form-control>
    </nz-form-item>
    <nz-form-item>
        <nz-form-control [nzOffset]="5" [nzSpan]="12">
            <button nz-button nzType="primary" [nzLoading]="inProgress"
                [disabled]="!form.valid">{{ 'AbpIdentity::Save' | abpLocalization }}</button>
        </nz-form-control>
    </nz-form-item>
</form>
<ng-template #passwordErrorTpl let-control>
    <ng-container *ngIf="control.hasError('requireDigit')">
        <p> <i nz-icon nzType="warning"></i>需要至少一个数字</p>
    </ng-container>
    <ng-container *ngIf="control.hasError('requireLowercase')">
        <p><i nz-icon nzType="warning"></i>需要至少一个小写字母</p>
    </ng-container>
    <ng-container *ngIf="control.hasError('requireUppercase')">
        <p> <i nz-icon nzType="warning"></i>需要至少一个大写字母</p>
    </ng-container>
    <ng-container *ngIf="control.hasError('requireNonAlphanumeric')">
        <p><i nz-icon nzType="warning"></i>需要至少一个特殊字符</p>
    </ng-container>
    <ng-container *ngIf="control.hasError('minlength')">
        <p><i nz-icon nzType="warning"></i>需要至少六位密码</p>
    </ng-container>
    <ng-container *ngIf="control.hasError('maxlength')">
        <p> <i nz-icon nzType="warning"></i>需要最多128为密码</p>
    </ng-container>
    <ng-container *ngIf="control.hasError('mismatch')">
        <p> <i nz-icon nzType="warning"></i>密码前后不一致</p>
    </ng-container>
</ng-template>