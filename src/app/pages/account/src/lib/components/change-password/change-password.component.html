<form nz-form [formGroup]="form" (ngSubmit)="onSubmit()">
    <nz-form-item *ngIf="!hideCurrentPassword">
        <nz-form-label [nzSpan]="5" nzRequired>
            <i nz-icon nzType="bank"></i>
            {{'AbpIdentity::DisplayName:CurrentPassword' | abpLocalization}}
        </nz-form-label>
        <nz-form-control [nzSpan]="18" [nzErrorTip]="orgErrorTpl">
            <input type="password" formControlName="password" nz-input
                [placeholder]="'AbpIdentity::DisplayName:CurrentPassword' | abpLocalization">
            <ng-template #orgErrorTpl let-control>
                <i nz-icon nzType="warning"></i>
                {{'AbpIdentity::The {0} field is required.' | abpLocalization}}
            </ng-template>
        </nz-form-control>
    </nz-form-item>
    <nz-form-item>
        <nz-form-label [nzSpan]="5" nzRequired>
            <i nz-icon nzType="mobile"></i>
            {{ 'AbpIdentity::DisplayName:NewPassword' | abpLocalization }}
        </nz-form-label>
        <nz-form-control [nzSpan]="18" nzHasFeedback [nzErrorTip]="passwordErrorTpl">
            <input type="password" formControlName="newPassword" nz-input
                [placeholder]="'AbpIdentity::DisplayName:NewPassword' | abpLocalization">
        </nz-form-control>
    </nz-form-item>
    <nz-form-item>
        <nz-form-label [nzSpan]="5" nzRequired>
            <i nz-icon nzType="phone"></i>
            {{'AbpIdentity::DisplayName:NewPasswordConfirm' | abpLocalization }}
        </nz-form-label>
        <nz-form-control [nzSpan]="18" nzHasFeedback [nzErrorTip]="passwordErrorTpl">
            <input type="password" formControlName="repeatNewPassword" nz-input
                [placeholder]="'AbpIdentity::DisplayName:NewPasswordConfirm' | abpLocalization">
        </nz-form-control>
    </nz-form-item>
    <nz-form-item>
        <nz-form-control [nzOffset]="5" [nzSpan]="12">
            <button nz-button nzType="primary" [nzLoading]="inProgress"
                [disabled]="!form.valid">{{ 'AbpIdentity::Save' | abpLocalization }}</button>
        </nz-form-control>
    </nz-form-item>
</form>
<ng-template #passwordErrorTpl let-control>
    <ng-container *ngIf="control.hasError('requireDigit')">
        <i nz-icon nzType="warning"></i>
        {{'AbpIdentity::Volo.Abp.Identity:PasswordRequiresDigit' | abpLocalization}}
    </ng-container>
    <ng-container *ngIf="control.hasError('requireLowercase')">
        <i nz-icon nzType="warning"></i>
        {{'AbpIdentity::Volo.Abp.Identity:PasswordRequiresLower' | abpLocalization}}
    </ng-container>
    <ng-container *ngIf="control.hasError('requireUppercase')">
        <i nz-icon nzType="warning"></i>
        {{'AbpIdentity::Volo.Abp.Identity:PasswordRequiresUpper' | abpLocalization}}
    </ng-container>
    <ng-container *ngIf="control.hasError('requireNonAlphanumeric')">
        <i nz-icon nzType="warning"></i>
        {{'AbpIdentity::Volo.Abp.Identity:PasswordRequiresNonAlphanumeric' | abpLocalization}}
    </ng-container>
    <ng-container *ngIf="control.hasError('minlength')">
        <i nz-icon nzType="warning"></i>
        {{'AbpIdentity::Volo.Abp.Identity:PasswordTooShort' | abpLocalization:control.errors['minlength'].requiredLength}}
    </ng-container>
    <ng-container *ngIf="control.hasError('mismatch')">
        <i nz-icon nzType="warning"></i>
        {{'AbpIdentity::Volo.Abp.Identity:PasswordConfirmationFailed' | abpLocalization}}
    </ng-container>
</ng-template>